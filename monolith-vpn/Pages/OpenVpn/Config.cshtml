@page "/p/monolith-vpn/openvpn/config"
@{
    Layout = null;
    ViewData["Title"] = "OpenVPN";
}

<div class="package-page openvpn-page" data-module="openvpn" data-package="monolith-vpn">
    <div class="container-fluid p-4">
        <!-- Page Header -->
        <div class="row mb-4">
            <div class="col-12">
                <h2 class="page-title">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                        <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/>
                    </svg>
                    OpenVPN
                </h2>
                <p class="text-muted">OpenVPN server and client configuration</p>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="alert d-none"></div>

        <!-- Main Tabs -->
        <ul class="nav nav-tabs mb-4" id="openvpnTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" 
                        type="button" role="tab" aria-controls="settings" aria-selected="true">
                    Settings
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="servers-tab" data-bs-toggle="tab" data-bs-target="#servers" 
                        type="button" role="tab" aria-controls="servers" aria-selected="false">
                    Servers
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients" 
                        type="button" role="tab" aria-controls="clients" aria-selected="false">
                    Clients
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="openvpnTabContent">
            <!-- Settings Tab -->
            <div class="tab-pane fade show active" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                <form id="settingsForm">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">OpenVPN Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label fw-bold">Enable OpenVPN</label>
                                <div class="col-sm-9">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="openvpnEnabled">
                                        <label class="form-check-label" for="openvpnEnabled">
                                            Enable OpenVPN service
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Port</label>
                                <div class="col-sm-9">
                                    <input type="number" class="form-control" id="port" value="1194" min="1" max="65535">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Protocol</label>
                                <div class="col-sm-9">
                                    <select class="form-select" id="protocol">
                                        <option value="udp" selected>UDP</option>
                                        <option value="tcp">TCP</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Cipher</label>
                                <div class="col-sm-9">
                                    <select class="form-select" id="cipher">
                                        <option value="AES-256-GCM" selected>AES-256-GCM</option>
                                        <option value="AES-128-GCM">AES-128-GCM</option>
                                        <option value="AES-256-CBC">AES-256-CBC</option>
                                        <option value="AES-128-CBC">AES-128-CBC</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Auth</label>
                                <div class="col-sm-9">
                                    <select class="form-select" id="auth">
                                        <option value="SHA256" selected>SHA256</option>
                                        <option value="SHA512">SHA512</option>
                                        <option value="SHA1">SHA1</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Compression</label>
                                <div class="col-sm-9">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="compression">
                                        <label class="form-check-label" for="compression">
                                            Enable compression
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button type="submit" class="btn btn-primary">Save Settings</button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Servers Tab -->
            <div class="tab-pane fade" id="servers" role="tabpanel" aria-labelledby="servers-tab">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">OpenVPN Servers</h5>
                        <button type="button" class="btn btn-sm btn-primary" id="addServerBtn">Add Server</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="serversTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Interface</th>
                                        <th>Network</th>
                                        <th>Port</th>
                                        <th>Status</th>
                                        <th>Clients</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="7" class="text-center text-muted">No servers configured</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clients Tab -->
            <div class="tab-pane fade" id="clients" role="tabpanel" aria-labelledby="clients-tab">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">OpenVPN Clients</h5>
                        <button type="button" class="btn btn-sm btn-primary" id="addClientBtn">Add Client</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="clientsTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Server</th>
                                        <th>Status</th>
                                        <th>Local IP</th>
                                        <th>Remote IP</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" class="text-center text-muted">No clients configured</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="/_content/Monolith.Vpn/css/openvpn.css" data-module-css="openvpn" />
    <script src="/_content/Monolith.Vpn/js/openvpn.js" data-module-js="openvpn"></script>
}
